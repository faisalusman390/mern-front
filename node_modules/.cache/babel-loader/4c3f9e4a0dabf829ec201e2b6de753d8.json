{"ast":null,"code":"var _jsxFileName = \"/home/faisal/Desktop/mern-front/src/components/common/Presentational/Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { toast } from 'react-toastify';\nimport { getUser, getPost, finduser } from '../../../services/API';\nimport Layout from '../../Layouts/Layout';\nimport { isAuth, getCookie, signout } from '../../../helpers/helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Posts({\n  history\n}) {\n  _s();\n\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [posts, setPosts] = useState([]);\n  const [subposts, setsubPosts] = useState([]);\n  useEffect(() => {\n    const _id = isAuth()._id;\n\n    const user_cookie = getCookie('token');\n    finduser(_id, user_cookie).then(respones => {//console.log(\"findme respones\", respones)\n    }).catch(error => {\n      console.log(\"findme error\", error);\n      signout(() => {\n        history.push('/');\n      }); // history.push('/signin');\n    });\n  });\n  useEffect(() => {\n    const fetchUsers = async () => {\n      setLoading(true);\n      getUser().then(res => {\n        console.log(res.data);\n        const {\n          users\n        } = res.data;\n        setUsers(users);\n        setLoading(false);\n      }).catch(error => {\n        toast.error(error);\n      });\n    };\n\n    fetchUsers();\n  }, []);\n  useEffect(() => {\n    const fetchPosts = async () => {\n      setLoading(true);\n      getPost().then(res => {\n        console.log(res.data);\n        const {\n          posts\n        } = res.data;\n        setPosts(posts);\n        setLoading(false);\n      }).catch(error => {\n        toast.error(error);\n      });\n    };\n\n    fetchPosts();\n  }, []);\n  useEffect(() => {\n    const fetchPosts = async () => {\n      // setLoading(true);\n      getPost().then(res => {\n        console.log(res.data);\n        const {\n          posts\n        } = res.data;\n        let user = isAuth();\n\n        if (user.role !== 'admin') {\n          let anonymous = posts.filter(post => {\n            return post.user === user._id;\n          });\n          setsubPosts(anonymous);\n        } else {\n          setPosts(posts);\n        } // setLoading(false);\n\n      }).catch(error => {\n        toast.error(error);\n      });\n    };\n\n    fetchPosts();\n  }, []); //  console.log(users)  \n\n  return (\n    /*#__PURE__*/\n    // const { users }= users;\n    _jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"'container mt-5'\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-primary mb-3\",\n          children: \"My Blog\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), isAuth() && isAuth().role === 'admin' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: (posts === null || posts === void 0 ? void 0 : posts.length) !== 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-group mb-4\",\n            children: posts === null || posts === void 0 ? void 0 : posts.map(post => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"list-group-item\",\n              children: post.title\n            }, post._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 27\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: (subposts === null || subposts === void 0 ? void 0 : subposts.length) !== 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-group mb-4\",\n            children: subposts === null || subposts === void 0 ? void 0 : subposts.map(post => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"list-group-item\",\n              children: post.title\n            }, post._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 27\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)\n  );\n}\n\n_s(Posts, \"Gb6Hv3VYZYYmeUIeLvVyXov7VmQ=\");\n\n_c = Posts;\n\nvar _c;\n\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"sources":["/home/faisal/Desktop/mern-front/src/components/common/Presentational/Profile.js"],"names":["React","useEffect","useState","toast","getUser","getPost","finduser","Layout","isAuth","getCookie","signout","Posts","history","users","setUsers","loading","setLoading","posts","setPosts","subposts","setsubPosts","_id","user_cookie","then","respones","catch","error","console","log","push","fetchUsers","res","data","fetchPosts","user","role","anonymous","filter","post","length","map","title"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport { toast } from 'react-toastify';\nimport { getUser, getPost,finduser } from '../../../services/API'\nimport Layout from '../../Layouts/Layout';\nimport { isAuth, getCookie, signout } from '../../../helpers/helpers';\n\nexport default function Posts({ history }) {\n    const [users, setUsers] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [posts, setPosts] = useState([]);\n    const [subposts, setsubPosts] = useState([]);\n\n    useEffect(() => {\n        const _id = isAuth()._id;\n        const user_cookie = getCookie('token');\n        finduser(_id,user_cookie).then(respones => {\n            //console.log(\"findme respones\", respones)\n\n        }).catch(error => {\n            console.log(\"findme error\",error)\n            signout(() => {\n                history.push('/');\n            });\n            // history.push('/signin');\n        })\n        \n      });\n\n    useEffect(() => {\n        const fetchUsers = async () => {\n        setLoading(true);\n        getUser().then(res => {\n            console.log(res.data)\n            const { users } = res.data;\n            setUsers(users);\n            setLoading(false);\n        })\n        .catch( error => {\n            toast.error(error);\n        })\n        \n        }\n        fetchUsers();\n    },[])\n    useEffect(() => {\n        const fetchPosts = async () => {\n        setLoading(true);\n        getPost().then(res => {\n            console.log(res.data)\n            const { posts } = res.data;\n            setPosts(posts);\n            setLoading(false);\n        })\n        .catch( error => {\n            toast.error(error);\n        })\n        \n        }\n        fetchPosts();\n    },[])\n    useEffect(() => {\n        const fetchPosts = async () => {\n        // setLoading(true);\n        getPost().then(res => {\n            console.log(res.data)\n            const { posts } = res.data;\n            let user = isAuth();\n            if(user.role !== 'admin') {\n                let anonymous = posts.filter((post) =>{\n                    return post.user === user._id\n                })\n                setsubPosts(anonymous)\n            } else {\n                setPosts(posts);\n            }\n            // setLoading(false);\n        })\n        .catch( error => {\n            toast.error(error);\n        })\n        \n        }\n\n        fetchPosts();\n    },[])\n    //  console.log(users)  \n    return (\n        // const { users }= users;\n        <Layout>\n            <div className=\"'container mt-5'\">\n            <h1 className=\"text-primary mb-3\">My Blog</h1>\n            {isAuth() && isAuth().role === 'admin' ? (\n                <div>\n                {\n                    posts?.length !== 0 ? (\n                        <ul className=\"list-group mb-4\">\n                      {posts?.map(post => (\n                          <li key={post._id} className=\"list-group-item\">\n                              {post.title}\n                          </li>\n                      ))}\n                    </ul>):(null)\n                    \n                } \n             </div>\n            ):(\n                <div>\n                {\n                    subposts?.length !== 0 ? (\n                        <ul className=\"list-group mb-4\">\n                      {subposts?.map(post => (\n                          <li key={post._id} className=\"list-group-item\">\n                              {post.title}\n                          </li>\n                      ))}\n                    </ul>):(null)\n                    \n                } \n             </div>\n            )}\n            </div>\n           \n        \n        \n    </Layout>\n       \n          \n        \n    )\n}\n"]},"metadata":{},"sourceType":"module"}