{"ast":null,"code":"var _jsxFileName = \"/home/faisal/Desktop/mern-front/src/components/common/Presentational/Private.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Layout from '../../Layouts/Layout';\nimport { isAuth, getCookie, signout } from '../../../helpers/helpers';\nimport { getUser, getPost, finduser } from '../../../services/API';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Private = ({\n  history\n}) => {\n  _s();\n\n  const [users, setUsers] = useState([]);\n  const [posts, setPosts] = useState([]); // const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const _id = isAuth()._id;\n\n    const user_cookie = getCookie('token');\n    finduser(_id, user_cookie).then(respones => {//console.log(\"findme respones\", respones)\n    }).catch(error => {\n      console.log(\"findme error\", error);\n      signout(() => {\n        history.push('/');\n      }); // history.push('/signin');\n    });\n  });\n  useEffect(() => {\n    const fetchUsers = async () => {\n      // setLoading(true);\n      getUser().then(res => {\n        console.log(res.data);\n        const {\n          users\n        } = res.data;\n        setUsers(users); // setLoading(false);\n      }).catch(error => {\n        toast.error(error);\n      });\n    };\n\n    fetchUsers();\n  }, []);\n  console.log(users);\n  useEffect(() => {\n    const fetchPosts = async () => {\n      // setLoading(true);\n      getPost().then(res => {\n        console.log(res.data);\n        const {\n          posts\n        } = res.data;\n        let user = isAuth();\n\n        if (user.role !== 'admin') {\n          let anonymous = posts.filter(post => {\n            return post.user === user._id;\n          });\n          setPosts(anonymous);\n        } else {\n          setPosts(posts);\n        } // setLoading(false);\n\n      }).catch(error => {\n        toast.error(error);\n      });\n    };\n\n    fetchPosts();\n  }, []);\n  console.log(\"posts array\", posts);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-primary mb-3\",\n        children: \"My Blog\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-group mb-4\",\n        children: posts.map(post => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"list-group-item\",\n          children: post.title\n        }, post._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 12\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Private, \"5dlJSwqFCz3+M5kmc1LGMZEHNDc=\");\n\n_c = Private;\nexport default Private;\n\nvar _c;\n\n$RefreshReg$(_c, \"Private\");","map":{"version":3,"sources":["/home/faisal/Desktop/mern-front/src/components/common/Presentational/Private.js"],"names":["React","useEffect","useState","Layout","isAuth","getCookie","signout","getUser","getPost","finduser","toast","Private","history","users","setUsers","posts","setPosts","_id","user_cookie","then","respones","catch","error","console","log","push","fetchUsers","res","data","fetchPosts","user","role","anonymous","filter","post","map","title"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Layout from '../../Layouts/Layout';\nimport { isAuth, getCookie, signout } from '../../../helpers/helpers';\nimport { getUser, getPost, finduser } from '../../../services/API'\nimport { toast } from 'react-toastify';\n\nconst Private = ({ history }) => {\n    const [users, setUsers] = useState([]);\n    const [posts, setPosts] = useState([]);\n    // const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        const _id = isAuth()._id;\n        const user_cookie = getCookie('token');\n        finduser(_id,user_cookie).then(respones => {\n            //console.log(\"findme respones\", respones)\n\n        }).catch(error => {\n            console.log(\"findme error\",error)\n            signout(() => {\n                history.push('/');\n            });\n            // history.push('/signin');\n        })\n        \n      });\n      useEffect(() => {\n        const fetchUsers = async () => {\n        // setLoading(true);\n        getUser().then(res => {\n            console.log(res.data)\n            const { users } = res.data;\n            setUsers(users);\n            // setLoading(false);\n        })\n        .catch( error => {\n            toast.error(error);\n        })\n        \n        }\n        fetchUsers();\n    },[])\n    console.log(users)\n    useEffect(() => {\n        const fetchPosts = async () => {\n        // setLoading(true);\n        getPost().then(res => {\n            console.log(res.data)\n            const { posts } = res.data;\n            let user = isAuth();\n            if(user.role !== 'admin') {\n                let anonymous = posts.filter((post) =>{\n                    return post.user === user._id\n                })\n                setPosts(anonymous)\n            } else {\n                setPosts(posts);\n            }\n            // setLoading(false);\n        })\n        .catch( error => {\n            toast.error(error);\n        })\n        \n        }\n\n        fetchPosts();\n    },[])\n   console.log(\"posts array\",posts);\n    return (\n    <Layout>\n        <div className='container mt-5'>\n        <h1 className=\"text-primary mb-3\">My Blog</h1>\n{\n           <ul className=\"list-group mb-4\">  \n               {posts.map(post => (\n              <li key={post._id} className=\"list-group-item\">\n                {post.title}\n             </li>\n      ))}\n      </ul>  \n      }\n        </div>   \n    </Layout>\n      )\n    };\n\nexport default Private;"]},"metadata":{},"sourceType":"module"}