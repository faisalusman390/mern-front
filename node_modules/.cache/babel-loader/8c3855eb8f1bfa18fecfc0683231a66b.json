{"ast":null,"code":"var _jsxFileName = \"/home/faisal/Desktop/mern-front/src/components/common/Smart/Signin.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport Layout from '../../Layouts/Layout';\nimport { authenticate, isAuth, validateSubscription } from '../../../helpers/helpers';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { signIn } from '../../../services/API';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Signin = ({\n  history\n}) => {\n  _s();\n\n  const [values, setValues] = useState({\n    email: 'faisalusman390@gmail.com',\n    password: '1234567',\n    buttonText: 'Submit'\n  });\n  const [emailErrorMsg, setEmailErrorMsg] = useState('');\n  const {\n    email,\n    password,\n    buttonText\n  } = values;\n\n  const handleChange = name => event => {\n    // console.log(event.target.value); \n    setValues({ ...values,\n      [name]: event.target.value\n    });\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values,\n      buttonText: 'Submitting'\n    });\n    const msg = validateSubscription(email);\n\n    if (msg.email_msg === 'EMAIL_MANDATORY') {\n      setEmailErrorMsg('Email mandatory');\n      return;\n    }\n\n    if (msg.email_msg === 'INVALID_EMAIL') {\n      setEmailErrorMsg('Invalid Email');\n    }\n\n    signIn(email, password).then(response => {\n      console.log('SIGNIN SUCCESS', response); // save the response (user, token) localstorage/cookie\n\n      authenticate(response, () => {\n        setValues({ ...values,\n          name: '',\n          email: '',\n          password: '',\n          buttonText: 'Submitted'\n        }); // toast.success(`Hey ${response.data.user.name}, Welcome back!`);\n        // isAuth() && isAuth().role === 'admin' ? history.push('/admin') : history.push('/private');\n\n        history.push('/');\n      });\n    }).catch(error => {\n      console.log('SIGNIN ERROR', error.response.data);\n      setValues({ ...values,\n        buttonText: 'Submit'\n      });\n      toast.error(error.response.data.error);\n    });\n  };\n\n  const signinForm = () => /*#__PURE__*/_jsxDEV(\"form\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"lable\", {\n        className: \"text-muted\",\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange('email'),\n        value: email,\n        type: \"email\",\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"lable\", {\n        className: \"text-muted\",\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange('password'),\n        value: password,\n        type: \"password\",\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: clickSubmit,\n        children: buttonText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 offset-md-3\",\n      children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), isAuth() ? /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 29\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"p-5 text-center\",\n        children: \"Signin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), signinForm(), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/auth/password/forgot\",\n        className: \"btn btn-sm btn-outline-danger\",\n        children: \"Forgot Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Signin, \"bMWuGjn+SUQRoM0m/eS4kv//1do=\");\n\n_c = Signin;\nexport default Signin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signin\");","map":{"version":3,"sources":["/home/faisal/Desktop/mern-front/src/components/common/Smart/Signin.js"],"names":["React","useState","Link","Redirect","Layout","authenticate","isAuth","validateSubscription","ToastContainer","toast","signIn","Signin","history","values","setValues","email","password","buttonText","emailErrorMsg","setEmailErrorMsg","handleChange","name","event","target","value","clickSubmit","preventDefault","msg","email_msg","then","response","console","log","push","catch","error","data","signinForm"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport Layout from '../../Layouts/Layout';\nimport { authenticate, isAuth, validateSubscription } from '../../../helpers/helpers';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { signIn } from '../../../services/API'\nimport 'react-toastify/dist/ReactToastify.min.css';\n\nconst Signin = ({ history }) => {\n    const [values, setValues] = useState({\n        email: 'faisalusman390@gmail.com',\n        password: '1234567',\n        buttonText: 'Submit'\n    });\n    const [emailErrorMsg, setEmailErrorMsg] = useState('');\n    const { email, password, buttonText } = values;\n\n    const handleChange = name => event => {\n        // console.log(event.target.value); \n        setValues({ ...values, [name]: event.target.value });\n    };\n\n    const clickSubmit = event => {\n        event.preventDefault();\n        setValues({ ...values, buttonText: 'Submitting' });\n        const msg = validateSubscription(email);\n\n        if (msg.email_msg === 'EMAIL_MANDATORY') {\n            setEmailErrorMsg('Email mandatory');\n            return;\n          } if (msg.email_msg === 'INVALID_EMAIL') {\n            setEmailErrorMsg('Invalid Email');\n          } \n       \n           signIn(email,password).then(response => {\n                console.log('SIGNIN SUCCESS', response);\n                // save the response (user, token) localstorage/cookie\n                authenticate(response, () => {\n                    setValues({ ...values, name: '', email: '', password: '', buttonText: 'Submitted' });\n                    // toast.success(`Hey ${response.data.user.name}, Welcome back!`);\n                    // isAuth() && isAuth().role === 'admin' ? history.push('/admin') : history.push('/private');\n                    history.push('/')\n                });\n            })\n            .catch(error => {\n                console.log('SIGNIN ERROR', error.response.data);\n                setValues({ ...values, buttonText: 'Submit' });\n                toast.error(error.response.data.error);\n            });\n    };\n\n    const signinForm = () => (\n        <form>\n            <div className=\"form-group\">\n                <lable className=\"text-muted\">Email</lable>\n                <input onChange={handleChange('email')} value={email} type=\"email\" className=\"form-control\" />\n                {/* <div className=\"form-text\" style={{color:'red'}}><p>{emailErrorMsg}</p></div> */}\n            </div>\n\n            <div className=\"form-group\">\n                <lable className=\"text-muted\">Password</lable>\n                <input onChange={handleChange('password')} value={password} type=\"password\" className=\"form-control\" />\n            </div>\n\n            <div>\n                <button className=\"btn btn-primary\" onClick={clickSubmit}>\n                    {buttonText}\n                </button>\n            </div>\n        </form>\n    );\n\n    return (\n        <Layout>\n            <div className=\"col-md-6 offset-md-3\">\n                <ToastContainer />\n                {isAuth() ? <Redirect to=\"/\" /> : null}\n                <h1 className=\"p-5 text-center\">Signin</h1>\n                {signinForm()}\n                <br />\n                <Link to=\"/auth/password/forgot\" className=\"btn btn-sm btn-outline-danger\">\n                    Forgot Password\n                </Link>\n            </div>\n        </Layout>\n    );\n};\n\nexport default Signin;"]},"metadata":{},"sourceType":"module"}