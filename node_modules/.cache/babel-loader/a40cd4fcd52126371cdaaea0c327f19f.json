{"ast":null,"code":"var _jsxFileName = \"/home/faisal/Desktop/mern-front/src/components/common/Smart/AddProduct.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Layout from '../../Layouts/Layout';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { changepassword, addproduct, updateproduct, deleteproduct } from '../../../services/API';\nimport { isAuth, getCookie } from '../../../helpers/helpers';\nimport { getPost } from '../../../services/API';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport { set } from 'js-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddProduct = ({\n  match\n}) => {\n  _s();\n\n  // props.match from react router dom\n  const [title, setTitle] = useState('');\n  const [edittitle, setEditTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [buttonText, setButtonText] = useState('Add Product');\n  const [user_id, setUserId] = useState('');\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState([]);\n  const [show, setShow] = useState(false);\n  const [product_title, setProduct_Title] = useState('');\n  const [productid, setProduct_Id] = useState('');\n\n  const fetchPosts = async () => {\n    // setLoading(true);\n    getPost().then(res => {\n      console.log(res.data);\n      const {\n        posts\n      } = res.data;\n      setPosts(posts); // setLoading(false);\n    }).catch(error => {\n      toast.error(error);\n    });\n  };\n\n  useEffect(() => {\n    const _id = isAuth()._id;\n\n    setUserId(_id);\n    fetchPosts();\n  }, []);\n\n  const handleTitle = e => {\n    setTitle(e.target.value);\n  };\n\n  const handleDesc = e => {\n    setDescription(e.target.value);\n  };\n\n  const handleEdit = e => {\n    setEditTitle(e.target.value);\n  };\n\n  const checkProduct = () => {\n    if (title === '') toast.error('title field is empty');\n    if (description === '') toast.error('description field is empty');else {\n      return true;\n    }\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n\n    if (title) {\n      console.log(\"title and id\", title, user_id);\n\n      if (checkProduct()) {\n        setButtonText(\"Adding\");\n        addproduct(title, description, user_id).then(response => {\n          // console.log('RESET PASSWORD SUCCESS', response);\n          toast.success(response.data.message);\n          setTitle('');\n          setDescription('');\n          setButtonText(\"Done\");\n          fetchPosts();\n        }).catch(error => {\n          // console.log('RESET PASSWORD ERROR', error.response.data);\n          toast.error(error.response.data.error);\n          setButtonText(\"Try again\");\n        });\n      }\n    } else if (edittitle) {\n      updateproduct(productid, edittitle).then(response => {\n        // console.log('RESET PASSWORD SUCCESS', response);\n        toast.success(response.data.message);\n        setTitle('');\n        setDescription('');\n        setButtonText(\"Add Product\");\n        fetchPosts(); // window.location.reload();\n      }).catch(error => {\n        // console.log('RESET PASSWORD ERROR', error.response.data);\n        // toast.error(error.response.data.error);\n        setButtonText(\"Try again\");\n      });\n    }\n  };\n\n  const clickEdit = (id, post_title) => {\n    setShow(true);\n    setEditTitle(post_title);\n    setButtonText('Update');\n    setProduct_Id(id);\n    fetchPosts(); // event.preventDefault();\n\n    console.log(id); // setButtonText(\"updating\") \n  };\n\n  const clickDelete = id => {\n    deleteproduct(id).then(response => {\n      // console.log('RESET PASSWORD SUCCESS', response);\n      toast.success(response.data.message);\n      fetchPosts();\n    }).catch(error => {\n      // console.log('RESET PASSWORD ERROR', error.response.data);\n      toast.error(error.response.data.error); // setButtonText(\"Try again\")\n    });\n  };\n\n  const CloseInput = () => {\n    setShow(false);\n    console.log(\"close input clicked\");\n  };\n\n  const addProductForm = () => /*#__PURE__*/_jsxDEV(\"form\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleTitle,\n        value: title,\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Product title\",\n        style: {\n          width: '90%'\n        },\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this), show ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group d-flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleEdit,\n        value: edittitle,\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Edit Product title\",\n        style: {\n          width: '90%'\n        },\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \" d-flex justify-content-center align-items-center ml-2\",\n        onClick: event => {\n          CloseInput(1);\n        },\n        \"aria-label\": \"Close\",\n        children: \"\\u2716\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 29\n    }, this) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group d-flex\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleDesc,\n        value: description,\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Product discription\",\n        style: {\n          width: '90%'\n        },\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: clickSubmit,\n        children: buttonText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 offset-md-3\",\n      children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"p-5 text-center\",\n        children: \"Hey Admin, Add a new product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }, this), addProductForm()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-5\",\n      children: (posts === null || posts === void 0 ? void 0 : posts.length) !== 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-group mb-4\",\n        children: posts === null || posts === void 0 ? void 0 : posts.map(post => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"list-group-item d-flex justify-content-between\",\n          children: [post.title, /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary pl-5 pr-5 mr-3\",\n              onClick: event => {\n                clickEdit(post._id, post.title);\n              },\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 31\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-danger pl-5 pr-5\",\n              onClick: event => {\n                clickDelete(post._id);\n              },\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 30\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 31\n          }, this)]\n        }, post._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 27\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 25\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 192,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AddProduct, \"gYRHkNt6mcYjr+iHunqNL4un6Hk=\");\n\n_c = AddProduct;\nexport default AddProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddProduct\");","map":{"version":3,"sources":["/home/faisal/Desktop/mern-front/src/components/common/Smart/AddProduct.js"],"names":["React","useState","useEffect","Layout","ToastContainer","toast","changepassword","addproduct","updateproduct","deleteproduct","isAuth","getCookie","getPost","set","AddProduct","match","title","setTitle","edittitle","setEditTitle","description","setDescription","buttonText","setButtonText","user_id","setUserId","posts","setPosts","loading","setLoading","show","setShow","product_title","setProduct_Title","productid","setProduct_Id","fetchPosts","then","res","console","log","data","catch","error","_id","handleTitle","e","target","value","handleDesc","handleEdit","checkProduct","clickSubmit","event","preventDefault","response","success","message","clickEdit","id","post_title","clickDelete","CloseInput","addProductForm","width","length","map","post"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,cAAT,EAAyBC,KAAzB,QAAsC,gBAAtC;AACA,SAASC,cAAT,EAAyBC,UAAzB,EAAqCC,aAArC,EAAoDC,aAApD,QAAwE,uBAAxE;AACA,SAASC,MAAT,EAAgBC,SAAhB,QAAiC,0BAAjC;AACA,SAASC,OAAT,QAAwB,uBAAxB;AACA,OAAO,2CAAP;AACA,SAASC,GAAT,QAAoB,WAApB;;;AAEA,MAAMC,UAAU,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAe;AAAA;;AAC9B;AACA,QAAM,CAAEC,KAAF,EAASC,QAAT,IAAqBhB,QAAQ,CAAC,EAAD,CAAnC;AACA,QAAM,CAAEiB,SAAF,EAAaC,YAAb,IAA6BlB,QAAQ,CAAC,EAAD,CAA3C;AACA,QAAM,CAAEmB,WAAF,EAAeC,cAAf,IAAiCpB,QAAQ,CAAC,EAAD,CAA/C;AACA,QAAM,CAAEqB,UAAF,EAAcC,aAAd,IAA+BtB,QAAQ,CAAC,aAAD,CAA7C;AACA,QAAM,CAAEuB,OAAF,EAAWC,SAAX,IAAwBxB,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACyB,KAAD,EAAQC,QAAR,IAAoB1B,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAAC2B,OAAD,EAAUC,UAAV,IAAwB5B,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAAC6B,IAAD,EAAOC,OAAP,IAAkB9B,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAAE+B,aAAF,EAAiBC,gBAAjB,IAAqChC,QAAQ,CAAC,EAAD,CAAnD;AACA,QAAM,CAAEiC,SAAF,EAAaC,aAAb,IAA8BlC,QAAQ,CAAC,EAAD,CAA5C;;AAIA,QAAMmC,UAAU,GAAG,YAAY;AAC3B;AACAxB,IAAAA,OAAO,GAAGyB,IAAV,CAAeC,GAAG,IAAI;AAClBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACA,YAAM;AAAEf,QAAAA;AAAF,UAAYY,GAAG,CAACG,IAAtB;AACAd,MAAAA,QAAQ,CAACD,KAAD,CAAR,CAHkB,CAIlB;AACH,KALD,EAMCgB,KAND,CAMQC,KAAK,IAAI;AACbtC,MAAAA,KAAK,CAACsC,KAAN,CAAYA,KAAZ;AACH,KARD;AAUC,GAZL;;AAcAzC,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAM0C,GAAG,GAAGlC,MAAM,GAAGkC,GAArB;;AACAnB,IAAAA,SAAS,CAACmB,GAAD,CAAT;AACAR,IAAAA,UAAU;AACX,GAJM,EAIL,EAJK,CAAT;;AAMA,QAAMS,WAAW,GAAIC,CAAD,IAAO;AACvB7B,IAAAA,QAAQ,CAAC6B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAR;AAED,GAHH;;AAKA,QAAMC,UAAU,GAAIH,CAAD,IAAO;AACtBzB,IAAAA,cAAc,CAACyB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAd;AAED,GAHH;;AAIE,QAAME,UAAU,GAAIJ,CAAD,IAAO;AACxB3B,IAAAA,YAAY,CAAC2B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAZ;AAED,GAHD;;AAKA,QAAMG,YAAY,GAAG,MAAM;AAEzB,QAAInC,KAAK,KAAK,EAAd,EACAX,KAAK,CAACsC,KAAN,CAAY,sBAAZ;AACA,QAAIvB,WAAW,KAAK,EAApB,EACAf,KAAK,CAACsC,KAAN,CAAY,4BAAZ,EADA,KAEI;AACA,aAAO,IAAP;AACH;AACJ,GATC;;AAWF,QAAMS,WAAW,GAAGC,KAAK,IAAI;AACzBA,IAAAA,KAAK,CAACC,cAAN;;AACA,QAAItC,KAAJ,EAAW;AACPuB,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA2BxB,KAA3B,EAAiCQ,OAAjC;;AACA,UAAG2B,YAAY,EAAf,EAAmB;AACf5B,QAAAA,aAAa,CAAC,QAAD,CAAb;AACAhB,QAAAA,UAAU,CAACS,KAAD,EAAOI,WAAP,EAAmBI,OAAnB,CAAV,CAAsCa,IAAtC,CAA2CkB,QAAQ,IAAI;AACnD;AACAlD,UAAAA,KAAK,CAACmD,OAAN,CAAcD,QAAQ,CAACd,IAAT,CAAcgB,OAA5B;AACAxC,UAAAA,QAAQ,CAAC,EAAD,CAAR;AACAI,UAAAA,cAAc,CAAC,EAAD,CAAd;AACAE,UAAAA,aAAa,CAAC,MAAD,CAAb;AACAa,UAAAA,UAAU;AACb,SAPD,EAQCM,KARD,CAQOC,KAAK,IAAI;AACZ;AACAtC,UAAAA,KAAK,CAACsC,KAAN,CAAYA,KAAK,CAACY,QAAN,CAAed,IAAf,CAAoBE,KAAhC;AACApB,UAAAA,aAAa,CAAC,WAAD,CAAb;AACH,SAZD;AAaH;AACJ,KAlBD,MAmBK,IAAIL,SAAJ,EAAe;AAChBV,MAAAA,aAAa,CAAC0B,SAAD,EAAWhB,SAAX,CAAb,CAAmCmB,IAAnC,CAAwCkB,QAAQ,IAAI;AAChD;AACAlD,QAAAA,KAAK,CAACmD,OAAN,CAAcD,QAAQ,CAACd,IAAT,CAAcgB,OAA5B;AACAxC,QAAAA,QAAQ,CAAC,EAAD,CAAR;AACAI,QAAAA,cAAc,CAAC,EAAD,CAAd;AACAE,QAAAA,aAAa,CAAC,aAAD,CAAb;AACAa,QAAAA,UAAU,GANsC,CAOhD;AACH,OARD,EASCM,KATD,CASOC,KAAK,IAAI;AACZ;AACA;AACApB,QAAAA,aAAa,CAAC,WAAD,CAAb;AACH,OAbD;AAcH;AAGJ,GAvCD;;AAwCA,QAAMmC,SAAS,GAAG,CAACC,EAAD,EAAIC,UAAJ,KAAmB;AACjC7B,IAAAA,OAAO,CAAC,IAAD,CAAP;AACAZ,IAAAA,YAAY,CAACyC,UAAD,CAAZ;AACArC,IAAAA,aAAa,CAAC,QAAD,CAAb;AACAY,IAAAA,aAAa,CAACwB,EAAD,CAAb;AACAvB,IAAAA,UAAU,GALuB,CAMjC;;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAYmB,EAAZ,EAPiC,CAQ7B;AACP,GATD;;AAUA,QAAME,WAAW,GAAIF,EAAD,IAAQ;AACxBlD,IAAAA,aAAa,CAACkD,EAAD,CAAb,CAAkBtB,IAAlB,CAAuBkB,QAAQ,IAAI;AAC/B;AACAlD,MAAAA,KAAK,CAACmD,OAAN,CAAcD,QAAQ,CAACd,IAAT,CAAcgB,OAA5B;AACArB,MAAAA,UAAU;AACb,KAJD,EAKCM,KALD,CAKOC,KAAK,IAAI;AACZ;AACAtC,MAAAA,KAAK,CAACsC,KAAN,CAAYA,KAAK,CAACY,QAAN,CAAed,IAAf,CAAoBE,KAAhC,EAFY,CAGZ;AACH,KATD;AAUH,GAXD;;AAYA,QAAMmB,UAAU,GAAG,MAAM;AACrB/B,IAAAA,OAAO,CAAC,KAAD,CAAP;AACAQ,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACH,GAHD;;AAKA,QAAMuB,cAAc,GAAG,mBACnB;AAAA,4BACI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,6BAEI;AACI,QAAA,QAAQ,EAAElB,WADd;AAEI,QAAA,KAAK,EAAE7B,KAFX;AAGI,QAAA,IAAI,EAAC,MAHT;AAII,QAAA,SAAS,EAAC,cAJd;AAKI,QAAA,WAAW,EAAC,eALhB;AAMI,QAAA,KAAK,EAAE;AAACgD,UAAAA,KAAK,EAAC;AAAP,SANX;AAOI,QAAA,QAAQ;AAPZ;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,YADJ,EAcYlC,IAAI,gBAAI;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA,8BAGR;AACI,QAAA,QAAQ,EAAEoB,UADd;AAEI,QAAA,KAAK,EAAEhC,SAFX;AAGI,QAAA,IAAI,EAAC,MAHT;AAII,QAAA,SAAS,EAAC,cAJd;AAKI,QAAA,WAAW,EAAC,oBALhB;AAMI,QAAA,KAAK,EAAE;AAAC8C,UAAAA,KAAK,EAAC;AAAP,SANX;AAOI,QAAA,QAAQ;AAPZ;AAAA;AAAA;AAAA;AAAA,cAHQ,eAYR;AAAG,QAAA,SAAS,EAAC,wDAAb;AAAsE,QAAA,OAAO,EAAGX,KAAD,IAAW;AAAES,UAAAA,UAAU,CAAC,CAAD,CAAV;AAAe,SAA3G;AAA6G,sBAAW,OAAxH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAZQ;AAAA;AAAA;AAAA;AAAA;AAAA,YAAJ,GAaA,EA3BhB,eA8BI;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA,6BAEI;AACI,QAAA,QAAQ,EAAEb,UADd;AAEI,QAAA,KAAK,EAAE7B,WAFX;AAGI,QAAA,IAAI,EAAC,MAHT;AAII,QAAA,SAAS,EAAC,cAJd;AAKI,QAAA,WAAW,EAAC,qBALhB;AAMI,QAAA,KAAK,EAAE;AAAC4C,UAAAA,KAAK,EAAC;AAAP,SANX;AAOI,QAAA,QAAQ;AAPZ;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,YA9BJ,eA6CI;AAAA,6BACI;AAAQ,QAAA,SAAS,EAAC,iBAAlB;AAAoC,QAAA,OAAO,EAAEZ,WAA7C;AAAA,kBACK9B;AADL;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YA7CJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;;AAsDA,sBACI,QAAC,MAAD;AAAA,4BACI;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA,8BACI,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAI,QAAA,SAAS,EAAC,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,EAGKyC,cAAc,EAHnB;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAMI;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,gBAEQ,CAAArC,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEuC,MAAP,MAAkB,CAAlB,gBACI;AAAI,QAAA,SAAS,EAAC,iBAAd;AAAA,kBACDvC,KADC,aACDA,KADC,uBACDA,KAAK,CAAEwC,GAAP,CAAWC,IAAI,iBACZ;AAAmB,UAAA,SAAS,EAAC,gDAA7B;AAAA,qBACKA,IAAI,CAACnD,KADV,eAEI;AAAA,oCAEA;AAAQ,cAAA,SAAS,EAAC,gCAAlB;AAAmD,cAAA,OAAO,EAAGqC,KAAD,IAAW;AAAEK,gBAAAA,SAAS,CAACS,IAAI,CAACvB,GAAN,EAAUuB,IAAI,CAACnD,KAAf,CAAT;AAAgC,eAAzG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFA,eAOD;AAAQ,cAAA,SAAS,EAAC,0BAAlB;AAA6C,cAAA,OAAO,EAAGqC,KAAD,IAAW;AAAEQ,gBAAAA,WAAW,CAACM,IAAI,CAACvB,GAAN,CAAX;AAAuB,eAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAPC;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA,WAASuB,IAAI,CAACvB,GAAd;AAAA;AAAA;AAAA;AAAA,gBADH;AADC;AAAA;AAAA;AAAA;AAAA,cADJ,GAqBQ;AAvBhB;AAAA;AAAA;AAAA;AAAA,YANJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAoCH,CAzND;;GAAM9B,U;;KAAAA,U;AA2NN,eAAeA,UAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Layout from '../../Layouts/Layout';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { changepassword, addproduct, updateproduct, deleteproduct} from '../../../services/API'\nimport { isAuth,getCookie } from '../../../helpers/helpers';\nimport { getPost } from '../../../services/API';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport { set } from 'js-cookie';\n\nconst AddProduct = ({ match }) => {\n    // props.match from react router dom\n    const [ title, setTitle] = useState('');\n    const [ edittitle, setEditTitle] = useState('');\n    const [ description, setDescription] = useState('');\n    const [ buttonText, setButtonText] = useState('Add Product');\n    const [ user_id, setUserId] = useState('')\n    const [posts, setPosts] = useState([]);\n    const [loading, setLoading] = useState([]);\n    const [show, setShow] = useState(false);\n    const [ product_title, setProduct_Title] = useState('');\n    const [ productid, setProduct_Id] = useState('');\n\n\n\n    const fetchPosts = async () => {\n        // setLoading(true);\n        getPost().then(res => {\n            console.log(res.data)\n            const { posts } = res.data;\n            setPosts(posts);\n            // setLoading(false);\n        })\n        .catch( error => {\n            toast.error(error);\n        })\n        \n        }\n    \n    useEffect(() => {\n        const _id = isAuth()._id;\n        setUserId(_id);\n        fetchPosts();\n      },[]);\n\n    const handleTitle = (e) => {\n        setTitle(e.target.value);\n       \n      };\n     \n    const handleDesc = (e) => {\n        setDescription(e.target.value);\n       \n      };\n      const handleEdit = (e) => {\n        setEditTitle(e.target.value);\n       \n      };\n   \n      const checkProduct = () => {\n\n        if (title === '')\n        toast.error('title field is empty');\n        if (description === '')\n        toast.error('description field is empty');\n        else{\n            return true;\n        }\n    }\n      \n    const clickSubmit = event => {\n        event.preventDefault();\n        if (title) {\n            console.log(\"title and id\",title,user_id)\n            if(checkProduct()) {\n                setButtonText(\"Adding\")\n                addproduct(title,description,user_id).then(response => {\n                    // console.log('RESET PASSWORD SUCCESS', response);\n                    toast.success(response.data.message);\n                    setTitle('')\n                    setDescription('')\n                    setButtonText(\"Done\")\n                    fetchPosts()\n                })\n                .catch(error => {\n                    // console.log('RESET PASSWORD ERROR', error.response.data);\n                    toast.error(error.response.data.error);\n                    setButtonText(\"Try again\")\n                });\n            }\n        }\n        else if (edittitle) {\n            updateproduct(productid,edittitle).then(response => {\n                // console.log('RESET PASSWORD SUCCESS', response);\n                toast.success(response.data.message);\n                setTitle('')\n                setDescription('')\n                setButtonText(\"Add Product\")\n                fetchPosts()\n                // window.location.reload();\n            })\n            .catch(error => {\n                // console.log('RESET PASSWORD ERROR', error.response.data);\n                // toast.error(error.response.data.error);\n                setButtonText(\"Try again\")\n            });\n        }\n       \n        \n    };\n    const clickEdit = (id,post_title) => {\n        setShow(true)\n        setEditTitle(post_title)\n        setButtonText('Update')\n        setProduct_Id(id)\n        fetchPosts()\n        // event.preventDefault();\n        console.log(id)\n            // setButtonText(\"updating\") \n    };\n    const clickDelete = (id) => {\n        deleteproduct(id).then(response => {\n            // console.log('RESET PASSWORD SUCCESS', response);\n            toast.success(response.data.message);\n            fetchPosts()\n        })\n        .catch(error => {\n            // console.log('RESET PASSWORD ERROR', error.response.data);\n            toast.error(error.response.data.error);\n            // setButtonText(\"Try again\")\n        });\n    };\n    const CloseInput = () => {\n        setShow(false)\n        console.log(\"close input clicked\")\n    }\n\n    const addProductForm = () => (\n        <form>\n            <div className=\"form-group\">\n                {/* <label className=\"text-muted\">old password</label> */}\n                <input\n                    onChange={handleTitle}\n                    value={title}\n                    type=\"text\"\n                    className=\"form-control\"\n                    placeholder=\"Product title\"\n                    style={{width:'90%'}}\n                    required\n                />\n            </div>\n            {\n                    show ? (<div className=\"form-group d-flex\">\n                    {/* <label className=\"text-muted\">new password</label> */}\n                    \n                    <input\n                        onChange={handleEdit}\n                        value={edittitle}\n                        type=\"text\"\n                        className=\"form-control\"\n                        placeholder=\"Edit Product title\"\n                        style={{width:'90%'}}\n                        required\n                    />\n                    <a className=\" d-flex justify-content-center align-items-center ml-2\" onClick={(event) => { CloseInput(1) }} aria-label=\"Close\">&#10006;</a>\n                </div>):''\n            }\n            \n            <div className=\"form-group d-flex\">\n                {/* <label className=\"text-muted\">new password</label> */}\n                <input\n                    onChange={handleDesc}\n                    value={description}\n                    type=\"text\"\n                    className=\"form-control\"\n                    placeholder=\"Product discription\"\n                    style={{width:'90%'}}\n                    required\n                />\n            </div>\n           \n\n\n            <div>\n                <button className=\"btn btn-primary\" onClick={clickSubmit}>\n                    {buttonText}\n                </button>\n            </div>\n        </form>\n    );\n\n    return (\n        <Layout>\n            <div className=\"col-md-6 offset-md-3\">\n                <ToastContainer />\n                <h1 className=\"p-5 text-center\">Hey Admin, Add a new product</h1>\n                {addProductForm()}\n            </div>\n            <div className=\"mt-5\">\n                {\n                    posts?.length !== 0 ? (\n                        <ul className=\"list-group mb-4\">\n                      {posts?.map(post => (\n                          <li key={post._id} className=\"list-group-item d-flex justify-content-between\">\n                              {post.title}\n                              <div>\n                              \n                              <button className=\"btn btn-primary pl-5 pr-5 mr-3\" onClick={(event) => { clickEdit(post._id,post.title) }}>\n                               Edit\n                              </button> \n                             \n                             \n                             <button className=\"btn btn-danger pl-5 pr-5\" onClick={(event) => { clickDelete(post._id) }}>\n                              Delete\n                             </button>\n                            \n                              </div>\n                              \n                          </li>\n                          \n                      ))}\n                    </ul>):(null)\n                    \n                } \n             </div>\n        </Layout>\n    );\n};\n\nexport default AddProduct;"]},"metadata":{},"sourceType":"module"}